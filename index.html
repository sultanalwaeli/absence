<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"/>
<title>رصد الغياب - تطبيق الويب</title>
<style>
:root{
  --brand:#115e59; --brand2:#0b8a6a; --ink:#0b1220; --muted:#5b6577; --stroke:#e6e9ef;
  --radius:16px; --bar:84px; --font:17px; --touch:44px;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Noto Naskh Arabic","Segoe UI",Tahoma,Arial,sans-serif;line-height:1.6;background:#0e1615;color:#0b1220;font-size:var(--font);-webkit-tap-highlight-color:transparent}
.container{max-width:100%;margin:0 auto;padding:12px 10px calc(var(--bar) + env(safe-area-inset-bottom) + 10px)}
.hero{border-radius:18px;color:#fff;padding:14px;background:linear-gradient(135deg,rgba(17,94,89,.96),rgba(11,138,106,.96));box-shadow:0 12px 30px rgba(0,0,0,.15);margin-bottom:12px}
.hero-inner{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;flex-wrap:wrap}
.badge{background:rgba(15,23,42,.92);color:#fff;border-radius:20px;padding:8px 12px;font-weight:700;font-size:14px;white-space:nowrap}
.card{background:#fff;border:1px solid var(--stroke);border-radius:var(--radius);padding:12px;margin-bottom:10px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
.grid2,.grid3{display:grid;gap:8px;margin-bottom:8px}
.grid2{grid-template-columns:1fr 1fr}
.grid3{grid-template-columns:1fr 1fr 1fr}
@media(max-width:768px){.grid3{grid-template-columns:1fr}.grid2{grid-template-columns:1fr}:root{--font:16px}}
.input,.select,.btn{padding:14px;border:2px solid var(--stroke);border-radius:14px;background:#fff;font:inherit;font-size:var(--font);min-height:var(--touch);width:100%}
.select{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%235b6577' d='M6 8L2 4h8z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:left 14px center;background-size:12px;padding-left:40px}
.btn{border:none;font-weight:700;cursor:pointer;text-align:center;transition:.2s}
.btn:disabled{opacity:.6;cursor:not-allowed}
.primary{color:#fff;background:linear-gradient(135deg,var(--brand),var(--brand2))}
.secondary{background:#f8fafc;color:var(--ink)}
.warning{color:#fff;background:linear-gradient(135deg,#f59e0b,#d97706)}
.danger{color:#fff;background:#dc2626}
.small{font-size:13px;color:#64748b}
.list{max-height:50vh;overflow-y:auto;margin-top:8px;border:1px solid var(--stroke);border-radius:12px}
.item{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid #f1f5f9}
.item:last-child{border-bottom:none}
.item .tag{font-size:12px;border-radius:20px;padding:4px 8px;border:1px solid var(--stroke);white-space:nowrap}
input[type="checkbox"]{transform:scale(1.25);accent-color:var(--brand);margin:0}
.status-list{display:flex;flex-wrap:wrap;gap:6px}
.pill{padding:8px 12px;border-radius:20px;border:2px solid var(--stroke);background:#fff;cursor:pointer;font-size:14px;transition:.2s}
.pill.taken{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border-color:transparent}
.sticky{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:2px solid var(--stroke);padding:10px;display:flex;gap:8px;z-index:1000;box-shadow:0 -8px 20px rgba(0,0,0,.1);flex-wrap:wrap;justify-content:space-between}
.actions{display:flex;gap:8px;flex-wrap:wrap;flex:1}
.toast{position:fixed;bottom:calc(var(--bar)+76px);left:50%;transform:translateX(-50%);background:#0f172a;color:#fff;padding:14px 18px;border-radius:12px;display:none;z-index:1001;font-size:15px;max-width:94%;text-align:center}
.success{background:linear-gradient(135deg,#10b981,#059669);font-weight:bold}
.loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;justify-content:center;align-items:center;z-index:1200}
.loading-box{background:#fff;padding:26px;border-radius:14px;min-width:220px;box-shadow:0 15px 35px rgba(0,0,0,.3);text-align:center}
.spinner{border:4px solid #eee;border-top:4px solid var(--brand);border-radius:50%;width:46px;height:46px;animation:spin 1s linear infinite;margin:0 auto 12px}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
.instructions{background:#f0f9ff;border:1px solid #bae6fd;border-radius:12px;padding:12px;margin-bottom:12px;font-size:14px;color:#0369a1}
.progress{display:flex;gap:8px;margin-top:8px}
.kpi{flex:1;background:#fff;border:1px solid var(--stroke);border-radius:12px;padding:10px;text-align:center}
.kpi .v{font-weight:800;font-size:18px}
.kpi .t{font-size:12px;color:#64748b}
.bar{height:8px;background:#e5e7eb;border-radius:999px;overflow:hidden;margin-top:8px}
.bar > div{height:100%;background:linear-gradient(90deg,#10b981,#0ea5e9)}
.password-modal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;justify-content:center;align-items:center;z-index:1300}
.password-content{background:#fff;padding:30px;border-radius:18px;min-width:300px;text-align:center;box-shadow:0 20px 40px rgba(0,0,0,.35)}
.password-content h3{margin:0 0 10px 0;color:#dc2626;font-size:19px}
.password-input{width:100%;padding:14px;border:2px solid #e5e7eb;border-radius:12px;font-size:18px;text-align:center;margin-bottom:12px;font-family:monospace;letter-spacing:2px}
.password-actions{display:flex;gap:8px}
.password-actions button{flex:1;padding:12px;border:none;border-radius:10px;font-weight:700;cursor:pointer}
.password-confirm{background:#dc2626;color:#fff}
.password-cancel{background:#6b7280;color:#fff}
</style>
</head>
<body>

<!-- 💡 نفس تصميم تطبيق الغياب الأصلي -->
<div class="container">
  <div id="loading" class="loading-overlay">
    <div class="loading-box">
      <div class="spinner"></div>
      <div id="loadingMsg">جاري التحميل…</div>
    </div>
  </div>

  <div id="app"></div>
</div>

<div id="toast" class="toast"></div>

<script>
// ⭐️ رابط التطبيق الجديد الخاص بك
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxNHFPxIo9_2dTSBbg9-A94Utc5VOwGzPa9EjiUhtevoB2WPuPZ-a_hb5dFh4F_6-MK/exec";

// نحمّل واجهة التطبيق مباشرة من سكربت Apps Script
(async()=>{
  document.getElementById("loading").style.display="flex";
  try{
    const res = await fetch(SCRIPT_URL);
    const html = await res.text();
    document.getElementById("app").innerHTML = html;
  }catch(e){
    document.getElementById("app").innerHTML = "<p style='color:red;text-align:center'>تعذر تحميل التطبيق. تحقق من الرابط.</p>";
  }
  document.getElementById("loading").style.display="none";
})();
</script>

</body>
</html>

